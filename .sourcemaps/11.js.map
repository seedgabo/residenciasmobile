{"version":3,"sources":["../../src/pages/reservations/reservations.module.ts","../../src/pages/reservations/reservations.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ReservationsPage } from './reservations';\n@NgModule({\n  declarations: [ReservationsPage],\n  imports: [\n    IonicPageModule.forChild(ReservationsPage)\n  ],\n})\nexport class ReservationsPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/reservations/reservations.module.ts","\nimport { Component, ViewChild } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\nimport { Api } from \"../../providers/api\";\nimport { DatePickerDirective } from 'datepicker-ionic2';\nimport moment from 'moment'\n\nimport {IonicPage} from \"ionic-angular\";\n\n@IonicPage()\n@Component({\n  selector: 'page-reservations',\n  templateUrl: 'reservations.html',\n})\nexport class ReservationsPage {\n  @ViewChild(DatePickerDirective) datepickerDirective: DatePickerDirective;\n  zones = [];\n  reservations = [];\n  selected;\n  date = moment.utc().add(1, 'day').toDate() //.format('YYYY-MM-DD')\n  today = moment.utc()\n  min = moment.utc().startOf('day').toDate() //.format('YYYY-MM-DD')\n  max = moment.utc().startOf('day').add(1, 'year').toDate() //.format('YYYY-MM-DD')\n  locale = { monday: false, weekdays: moment.weekdaysShort(), months: moment.months() }\n  disabledDates = []\n  constructor(public navCtrl: NavController, public navParams: NavParams, public api: Api) {\n\n  }\n\n  ionViewDidLoad() {\n    this.getReservations();\n    this.getZones();\n  }\n\n  getReservations() {\n    this.api.get('reservations?where[user_id]=' + this.api.user.id)\n      .then((data: any) => { this.reservations = data })\n      .catch(console.error)\n  }\n\n  getZones() {\n    this.api.get('zones?scope[reservable]=')\n      .then((data: any) => { this.zones = data; console.log(\"zones:\", data) })\n      .catch(console.error)\n  }\n\n  humanize(interval) {\n    if (interval === \"60\" || interval === 60) {\n      return \"1 hora\";\n    } else if (interval === \"90\" || interval === 90) {\n      return \"1 hora y media\";\n    } else if (interval === \"180\" || interval === 180) {\n      return \"2 horas\";\n    } else if (interval === \"360\" || interval === 360) {\n      return \"6 horas\";\n    } else if (interval === \"720\" || interval === 720) {\n      return \"12 horas\";\n    } else if (interval === \"1440\" || interval === 1440) {\n      return \"24 horas\";\n    } else {\n      return interval + \" \" + \"minutos\";\n    }\n  }\n\n  reservate(zone) {\n    this.selected = zone\n    this.disabledDates = this.getDisabledDays(this.selected.days);\n    setTimeout(() => {\n      this.datepickerDirective.open()\n    }, 200)\n  }\n\n  setDate(ev, zone) {\n    var date = moment.utc(ev)\n    this.navCtrl.push('ZoneReservationPage', { zone: zone, date: date }, { animation: 'ios-transition' })\n  }\n\n\n\n  getDisabledDays(availables_days) {\n    var notDays = this.arr_diff(availables_days, [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\", \"sunday\"]);\n    var disabledDates = []\n    notDays.forEach((day) => {\n      disabledDates = disabledDates.concat(\n        this.getDaysBetweenDates(\n          this.min, this.max, day\n        )\n      )\n    })\n    console.log(disabledDates)\n    return disabledDates;\n  }\n\n  getDaysBetweenDates(start, end, dayName) {\n    var result = [];\n    var days = { sun: 0, mon: 1, tue: 2, wed: 3, thu: 4, fri: 5, sat: 6 };\n    var day = days[dayName.toLowerCase().substr(0, 3)];\n    // Copy start date\n    var current = moment(start).clone();\n    var _end = moment(end).clone();\n\n    while (current.day(7 + day).isBefore(_end)) {\n      result.push(current.toDate());\n    }\n    return result;\n  }\n\n  arr_diff(a1, a2) {\n    var a = [], diff = [];\n\n    for (var i = 0; i < a1.length; i++) {\n      a[a1[i]] = true;\n    }\n\n    for (var i = 0; i < a2.length; i++) {\n      if (a[a2[i]]) {\n        delete a[a2[i]];\n      } else {\n        a[a2[i]] = true;\n      }\n    }\n\n    for (var k in a) {\n      diff.push(k);\n    }\n\n    return diff;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/reservations/reservations.ts"],"sourceRoot":""}