{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProfilePage } from './profile';\n@NgModule({\n  declarations: [ProfilePage],\n  imports: [\n    IonicPageModule.forChild(ProfilePage),\n  ],\n})\nexport class ProfilePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { ToastController } from 'ionic-angular';\nimport { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\nimport { Api } from \"../../providers/api\";\nimport moment from 'moment';\nimport {IonicPage} from \"ionic-angular\";\n\n@IonicPage()\n@Component({\n  selector: 'page-profile',\n  templateUrl: 'profile.html',\n})\nexport class ProfilePage {\n  monthShortNames;\n  months;\n  profile: any = {};\n  residence: any = {};\n  editable = false\n  password = \"\";\n  password_confirmation = \"\"\n  constructor(public navCtrl: NavController, public navParams: NavParams, public api: Api, public toast: ToastController) {\n    this.monthShortNames = moment.monthsShort().join(\", \");\n    this.months = moment.months().join(\", \");\n    this.profile = JSON.parse(JSON.stringify(this.api.user));\n    this.profile.birthday = moment(this.api.user.birthday).format('YYYY-MM-DD');\n    this.residence = JSON.parse(JSON.stringify(this.api.residence));\n  }\n\n  ionViewDidLoad() {\n\n  }\n\n  updateProfile() {\n    this.api.put(`users/${this.api.user.id}`, {\n      name: this.profile.name,\n      email: this.profile.email,\n      document: this.profile.document,\n      sex: this.profile.sex,\n      phone_number: this.profile.phone_number,\n      birthday: this.profile.birthday,\n      relationship: this.profile.relationship,\n    })\n      .then((data: any) => {\n        this.api.user.name = data.name;\n        this.api.user.email = data.email;\n        this.api.user.document = data.document;\n        this.api.user.sex = data.sex;\n        this.api.user.phone_number = data.phone_number;\n        this.api.user.birthday = data.birthday;\n        this.api.storage.set('user', this.api.user);\n        this.toast.create({\n          message: this.api.trans(\"literals.user\") + \" \" + this.api.trans(\"crud.updated\"),\n          duration: 1500,\n          showCloseButton: true,\n        }).present();\n      })\n      .catch(console.error)\n  }\n\n  updateResidence() {\n    this.api.put(`residences/${this.api.user.residence_id}?with[]=owner`, {\n      name: this.residence.name,\n      number_of_people: this.residence.number_of_people,\n      owner_id: this.residence.owner_id\n    })\n      .then((data: any) => {\n        this.api.residence.name = data.name;\n        this.api.residence.number_of_people = data.number_of_people;\n        this.api.residence.owner_id = data.owner_id;\n        this.api.residence.owner = data.owner;\n        this.api.storage.set('residence', this.api.residence);\n        this.toast.create({\n          message: this.api.trans(\"literals.residence\") + \" \" + this.api.trans(\"crud.updated\"),\n          duration: 1500,\n          showCloseButton: true,\n        }).present();\n      })\n      .catch(console.error)\n  }\n\n  updatePassword() {\n    this.api.post('update-password', { password: this.password })\n      .then((data) => {\n        this.toast.create({\n          message: this.api.trans('literals.password') + \" \" + this.api.trans('crud.updated'),\n          duration: 1500\n        }).present();\n      })\n      .catch(console.error)\n  }\n\n  updatePhoto() {\n  }\n\n  canSaveUser() {\n    return (this.profile.name && this.profile.name.length > 3) &&\n      (this.profile.email && this.profile.email.length > 5) &&\n      (this.profile.document && this.profile.document.length > 3)\n  }\n\n  canSaveResidence() {\n    return (this.residence.name && this.residence.name.length > 3) &&\n      (this.residence.owner_id)\n  }\n\n\n  askFile() {\n    var filer: any = document.querySelector(\"#input-file\")\n    filer.click();\n  }\n\n  readFile(event) {\n    try {\n      var reader: any = new FileReader();\n      reader.readAsDataURL(event.target.files[0])\n      reader.onload = (result) => {\n        this.profile.image_url = result.target.result;\n        this.uploadImage(this.api.user.id)\n      };\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  uploadImage(id) {\n    return this.api.post('images/upload/user/' + id, { image: this.profile.image_url })\n      .then((data: any) => {\n        console.log(data);\n        this.api.user.image = data.image;\n        this.api.user.image_url = data.resource.image_url;\n        this.api.user.image_id = data.resource.image_id\n        this.api.storage.set('user', this.api.user);\n        this.toast.create({\n          message: this.api.trans(\"literals.image\") + \" \" + this.api.trans(\"crud.updated\"),\n          duration: 1500,\n          showCloseButton: true,\n        }).present();\n      })\n      .catch(console.error)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}