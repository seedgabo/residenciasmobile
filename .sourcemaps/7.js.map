{"version":3,"sources":["../../src/pages/visits/visits.module.ts","../../src/pages/visits/visits.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACV;AACiB;AAQvD,IAAa,gBAAgB;IAA7B;IAAgC,CAAC;IAAD,uBAAC;AAAD,CAAC;AAApB,gBAAgB;IAP5B,+DAAQ,CAAC;QACR,YAAY,EAAE,CAAC,2DAAU,CAAC;QAC1B,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;YACpC,wEAAW;SACZ;KACF,CAAC;GACW,gBAAgB,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;;ACXa;AACe;AACf;AAO1C,IAAa,UAAU;IAGrB,oBAAmB,OAAsB,EAAS,SAAoB,EAAS,GAAQ;QAApE,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,QAAG,GAAH,GAAG,CAAK;QAFvF,kBAAa,GAAY,IAAI,CAAC;QAC9B,WAAM,GAAG,EAAE,CAAC;IAEZ,CAAC;IAED,mCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QACzC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;QAC9B,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAED,8BAAS,GAAT,UAAU,KAAK;QACb,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;IACnD,CAAC;IAED,8BAAS,GAAT,UAAU,OAAc;QAAxB,iBAgBC;QAhBS,wCAAc;QACtB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,2EAAyE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,uCAAoC,CAAC;aAC7I,IAAI,CAAC,UAAC,IAAS;YACd,OAAO,CAAC,QAAQ,EAAE;YAClB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;gBACrB,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC7B,CAAC;YACD,KAAI,CAAC,MAAM,GAAG,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACjC,EAAE,CAAC,CAAC,OAAO,CAAC;gBACV,OAAO,CAAC,QAAQ,EAAE;QACtB,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,GAAG;YACT,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACnB,EAAE,CAAC,CAAC,OAAO,CAAC;gBACV,OAAO,CAAC,QAAQ,EAAE;QACtB,CAAC,CAAC,CAAC;IACP,CAAC;IAGD,QAAQ;IACR,mCAAc,GAAd,UAAe,cAAqB;QAApC,iBAgBC;QAhBc,sDAAqB;QAClC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,2EAAyE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,uDAAkD,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAI,CAAC;aAC9K,IAAI,CAAC,UAAC,IAAS;YACd,cAAc,CAAC,QAAQ,EAAE;YACzB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;gBACrB,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC7B,CAAC;YACD,KAAI,CAAC,MAAM,GAAG,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACvC,EAAE,CAAC,CAAC,cAAc,CAAC;gBACjB,cAAc,CAAC,QAAQ,EAAE;QAC7B,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,GAAG;YACT,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACnB,EAAE,CAAC,CAAC,cAAc,CAAC;gBACjB,cAAc,CAAC,QAAQ,EAAE;QAC7B,CAAC,CAAC,CAAC;IACP,CAAC;IAIH,iBAAC;AAAD,CAAC;AAxDY,UAAU;IAJtB,gEAAS,CAAC;QACT,QAAQ,EAAE,aAAa;OACG;KAC3B,CAAC;eAIuF;AAqDxF;SAxDY,UAAU,e","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { VisitsPage } from './visits';\nimport { PipesModule } from '../../pipes/pipes.module';\n@NgModule({\n  declarations: [VisitsPage],\n  imports: [\n    IonicPageModule.forChild(VisitsPage),\n    PipesModule\n  ],\n})\nexport class VisitsPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/visits/visits.module.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, IonicPage } from 'ionic-angular';\nimport { Api } from \"../../providers/api\";\n\n@IonicPage()\n@Component({\n  selector: 'page-visits',\n  templateUrl: 'visits.html',\n})\nexport class VisitsPage {\n  enable_loader: boolean = true;\n  visits = [];\n  constructor(public navCtrl: NavController, public navParams: NavParams, public api: Api) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad VisitsPage');\n    this.visits = this.api.visits;\n    this.getVisits();\n  }\n\n  viewVisit(visit) {\n    this.navCtrl.push('VisitPage', { visit: visit });\n  }\n\n  getVisits(loading = null) {\n    this.api.get(`visits?with[]=visitor&with[]=user&with[]=visitors&where[residence_id]=${this.api.residence.id}}&limit=500&order[created_at]=desc`)\n      .then((data: any) => {\n        loading.complete()\n        if (data.length == 0) {\n          this.enable_loader = false;\n        }\n        this.visits = this.visits = data;\n        if (loading)\n          loading.complete()\n      })\n      .catch((err) => {\n        console.error(err);\n        if (loading)\n          loading.complete()\n      });\n  }\n\n\n  // Broke\n  loadMoreVisits(infiniteScroll = null) {\n    this.api.get(`visits?with[]=visitor&with[]=user&with[]=visitors&where[residence_id]=${this.api.residence.id}}&limit=500&order[created_at]=desc&whereGt[id]=${this.visits[0].id}`)\n      .then((data: any) => {\n        infiniteScroll.complete()\n        if (data.length == 0) {\n          this.enable_loader = false;\n        }\n        this.visits = this.visits.concat(data);\n        if (infiniteScroll)\n          infiniteScroll.complete()\n      })\n      .catch((err) => {\n        console.error(err);\n        if (infiniteScroll)\n          infiniteScroll.complete()\n      });\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/visits/visits.ts"],"sourceRoot":""}