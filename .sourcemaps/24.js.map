{"version":3,"sources":["../../src/pages/documents/documents.module.ts","../../src/pages/documents/documents.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DocumentsPage } from './documents';\n@NgModule({\n  declarations: [DocumentsPage],\n  imports: [\n    IonicPageModule.forChild(DocumentsPage)\n  ],\n})\nexport class DocumentsPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/documents/documents.module.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Api } from \"../../providers/api\";\nimport { Transfer, TransferObject } from \"@ionic-native/transfer\";\nimport { File } from \"@ionic-native/file\";\nimport { FileOpener } from \"@ionic-native/file-opener\";\nimport {IonicPage} from \"ionic-angular\";\n\n@IonicPage()\n@Component({\n  selector: 'page-documents',\n  templateUrl: 'documents.html',\n})\nexport class DocumentsPage {\n  documents = [];\n  selected = null;\n  query = \"\";\n  constructor(public navCtrl: NavController, public navParams: NavParams, public api: Api, public sanitizer: DomSanitizer, public file: File, public transfer: Transfer, public fileOpener: FileOpener) {\n  }\n\n  ionViewDidLoad() {\n    this.getDocuments();\n  }\n  getDocuments() {\n    this.api.get('documents')\n      .then((data: any) => {\n        console.log(data);\n        this.documents = data;\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  download(document) {\n    var transfer: TransferObject = this.transfer.create();\n    var url = this.api.url + \"api/document/\" + document.id;\n    transfer.download(url, this.file.dataDirectory + 'document.pdf', true, {\n      headers: {\n        \"Auth-Token\": this.api.user.token\n      }\n    })\n      .then((entry) => {\n        console.log(entry)\n        this._openFile(entry.toURL(), document.type)\n      })\n      .catch((err) => {\n        console.error(err)\n      })\n  }\n  documentsFilter() {\n    if (this.query === '') {\n      return this.documents;\n    }\n    return this.documents.filter((doc) => {\n      return (doc.title && doc.title.toLowerCase().indexOf(this.query.toLowerCase()) > -1)\n        || (doc.description && doc.description.toLowerCase().indexOf(this.query.toLowerCase()) > -1)\n        || (doc.type && doc.type.toLowerCase().indexOf(this.query.toLowerCase()) > -1);\n    })\n  }\n\n  _openFile(url, type = \"pdf\") {\n    if (type === 'pdf' || type === 'dynamic') {\n      var mime = 'application/pdf'\n    }\n    else if (type === 'jpg') {\n      var mime = 'image/jpeg'\n    }\n    else if (type === 'png') {\n      var mime = 'image/png'\n    }\n    else if (type === 'xls' || type === 'xlsx') {\n      var mime = 'application/vnd.ms-excel';\n    }\n    else if (type === 'doc' || type === 'docx') {\n      var mime = 'application/msword';\n    }\n    else if (type === 'ppt' || type === 'pptx') {\n      var mime = 'vnd.ms-powerpoint';\n    }\n    else {\n      var mime = \"\";\n    }\n    this.fileOpener.open(url, mime)\n      .then(() => console.log('File is opened'))\n      .catch(e => console.log('Error openening file', e));\n  }\n\n  iconColor(document) {\n    var type = document.type\n    if (type === 'pdf' || type === 'dynamic') {\n      return '#F44336'\n    }\n    else if (type === 'jpg') {\n      return '#00BCD4'\n    }\n    else if (type === 'png') {\n      return '#00BCD4'\n    }\n    else if (type === 'xls' || type === 'xlsx') {\n      return '#4CAF50';\n    }\n    else {\n      return \"#2196F3\";\n    }\n  }\n\n  icon(document) {\n    var type = document.type\n    if (type === 'pdf' || type === 'dynamic') {\n      return 'fa-file-pdf-o'\n    }\n    else if (type === 'jpg') {\n      return 'fa-file-image-o'\n    }\n    else if (type === 'png') {\n      return 'fa-file-image-o'\n    }\n    else if (type === 'xls' || type === 'xlsx') {\n      return 'fa-file-excel-o';\n    }\n    else {\n      return \"fa-file-o\";\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/documents/documents.ts"],"sourceRoot":""}