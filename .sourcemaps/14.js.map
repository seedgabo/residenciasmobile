{"version":3,"sources":["../../src/pages/pets/pets.module.ts","../../src/pages/pets/pets.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PetsPage } from './pets';\n@NgModule({\n  declarations: [PetsPage],\n  imports: [\n    IonicPageModule.forChild(PetsPage)\n  ],\n})\nexport class PetsPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pets/pets.module.ts","import { ToastController, ActionSheetController } from 'ionic-angular';\nimport { Api } from './../../providers/api';\nimport { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\n\nimport {IonicPage} from \"ionic-angular\";\n\n@IonicPage()\n@Component({\n  selector: 'page-pets',\n  templateUrl: 'pets.html',\n})\nexport class PetsPage {\n  pet_image: any;\n  query = \"\"\n  pets = [];\n  constructor(public navCtrl: NavController, public navParams: NavParams, public api: Api, public toast: ToastController, public actionsheet: ActionSheetController) {\n    this.pets = this.api.residence.pets;\n  }\n  ionViewDidEnter() {\n    this.getData()\n  }\n\n  getData() {\n    this.api.get('pets?where[residence_id]=' + this.api.user.residence_id)\n      .then((data: any) => { this.api.pets = data; this.filter() })\n      .catch(console.error)\n  }\n\n  filter() {\n    if (this.query == \"\")\n      return this.pets = this.api.pets;\n    this.pets = this.api.pets.filter((pet) => {\n      if (pet.name.toLowerCase().indexOf(this.query.toLowerCase()) > -1\n        || pet.document.toLowerCase().indexOf(this.query.toLowerCase()) > -1\n      )\n        return true;\n      return false;\n    });\n  }\n\n  addpet() {\n    this.navCtrl.push('PetsEditorPage');\n  }\n\n  updatepet(pet) {\n    this.navCtrl.push('PetsEditorPage', { pet: pet });\n  }\n\n  delete(pet) {\n    this.api.delete('pets/' + pet.id)\n      .then((data) => {\n        this.getData();\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n\n  actions(pet) {\n    this.actionsheet.create({\n      title: this.api.trans('literals.actions') + \" | \" + pet.name,\n      buttons: [\n        {\n          text: this.api.trans('crud.edit'),\n          icon: 'create',\n          cssClass: 'icon-secondary',\n          handler: () => { this.updatepet(pet) }\n        },\n        {\n          text: this.api.trans('crud.edit') + \" \" + this.api.trans('literals.image'),\n          icon: 'camera',\n          cssClass: 'icon-purple',\n          handler: () => { this.askFile(pet) }\n        },\n        {\n          text: this.api.trans('crud.delete'),\n          icon: 'trash',\n          role: 'destructive',\n          cssClass: 'icon-danger',\n          handler: () => { this.delete(pet) }\n        }\n\n      ]\n    }).present();\n  }\n\n\n  askFile(pet) {\n    this.pet_image = pet;\n    var filer: any = document.querySelector(\"#input-file-pet\")\n    filer.click();\n  }\n\n  readFile(event) {\n    try {\n      var reader: any = new FileReader();\n      reader.readAsDataURL(event.target.files[0])\n      reader.onload = (result) => {\n        this.pet_image.image_url = result.target.result;\n        this.uploadImage(this.pet_image.id)\n      };\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  uploadImage(id) {\n    return this.api.post('images/upload/pet/' + id, { image: this.pet_image.image_url })\n      .then((data: any) => {\n        console.log(data);\n        this.pet_image.image = data.image;\n        this.toast.create({\n          message: this.api.trans(\"literals.image\") + \" \" + this.api.trans(\"crud.updated\"),\n          duration: 1500,\n          showCloseButton: true,\n        }).present();\n      })\n      .catch(console.error)\n  }\n\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pets/pets.ts"],"sourceRoot":""}