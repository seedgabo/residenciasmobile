{"version":3,"sources":["../../src/pages/new-visit/new-visit.module.ts","../../src/pages/new-visit/new-visit.ts"],"names":[],"mappings":"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","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NewVisitPage } from './new-visit';\n@NgModule({\n  declarations: [NewVisitPage],\n  imports: [\n    IonicPageModule.forChild(NewVisitPage)\n  ],\n})\nexport class NewVisitPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-visit/new-visit.module.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, ViewController, Events } from 'ionic-angular';\n\nimport {IonicPage} from \"ionic-angular\";\n\n@IonicPage()\n@Component({\n  selector: 'page-new-visit',\n  templateUrl: 'new-visit.html',\n})\nexport class NewVisitPage {\n  dismissforUpdate: (data: any) => void;\n  visit: any = {};\n  api: any;\n  already_dismiss = false;\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewctrl: ViewController, public events: Events) {\n    this.visit = navParams.get('visit');\n    this.api = navParams.get('api');\n    console.log(this.visit);\n    this.getVisit();\n    this.dismissforUpdate = (data) => {\n      if (data.visit.id == this.visit.id) {\n        this.dismiss();\n      }\n    };\n  }\n  getVisit() {\n    this.api.get(`visits/${this.visit.id}?with[]=visitor&with[]=vehicle&with[]=visitors&with[]=user`)\n      .then((data) => {\n        this.visit = data;\n        console.log(this.visit);\n      })\n      .catch(console.error)\n  }\n\n\n  ionViewDidLoad() {\n    this.events.subscribe('VisitUpdated', this.dismissforUpdate);\n  }\n\n\n  dismiss() {\n    this.events.unsubscribe('VisitUpdated', this.dismissforUpdate);\n    if (!this.already_dismiss) {\n      this.viewctrl.dismiss();\n      this.already_dismiss = true;\n      this.events.publish('stopSound', {});\n    }\n  }\n\n  confirm() {\n    this.api.post(`visits/${this.visit.id}/visitApprove`, { status: 'approved' })\n      .then(\n      (data) => {\n        console.log(data);\n        this.dismiss();\n      }\n      )\n      .catch(\n      (err) => {\n        console.error(err);\n      });\n  }\n\n  reject() {\n    this.api.post(`visits/${this.visit.id}/visitApprove`, { status: 'rejected' })\n      .then(\n      (data) => {\n        console.log(data);\n        this.dismiss();\n      }\n      )\n      .catch(\n      (err) => {\n        console.error(err);\n      });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-visit/new-visit.ts"],"sourceRoot":""}