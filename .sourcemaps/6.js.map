{"version":3,"sources":["../../src/pages/vehicles/vehicles.module.ts","../../src/pages/vehicles/vehicles.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { VehiclesPage } from './vehicles';\n@NgModule({\n  declarations: [VehiclesPage],\n  imports: [\n    IonicPageModule.forChild(VehiclesPage)\n  ],\n})\nexport class VehiclesPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vehicles/vehicles.module.ts","import { ToastController, ActionSheetController } from 'ionic-angular';\nimport { Api } from './../../providers/api';\nimport { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\n\nimport {IonicPage} from \"ionic-angular\";\n\n@IonicPage()\n@Component({\n  selector: 'page-vehicles',\n  templateUrl: 'vehicles.html',\n})\nexport class VehiclesPage {\n  vehicle_image: any;\n  query = \"\"\n  vehicles = [];\n  constructor(public navCtrl: NavController, public navParams: NavParams, public api: Api, public toast: ToastController, public actionsheet: ActionSheetController) {\n    this.vehicles = this.api.residence.vehicles;\n  }\n  ionViewDidEnter() {\n    this.getData()\n  }\n\n  getData() {\n    this.api.get('vehicles?where[residence_id]=' + this.api.user.residence_id)\n      .then((data: any) => { this.api.vehicles = data; this.filter() })\n      .catch(console.error)\n  }\n\n  filter() {\n    if (this.query == \"\")\n      return this.vehicles = this.api.vehicles;\n    this.vehicles = this.api.vehicles.filter((vehicle) => {\n      if (vehicle.name.toLowerCase().indexOf(this.query.toLowerCase()) > -1 || vehicle.plate.toLowerCase().indexOf(this.query.toLowerCase()) > -1)\n        return true;\n      return false;\n    });\n  }\n\n  addVehicle() {\n    this.navCtrl.push('VehiclesEditorPage');\n  }\n\n  updateVehicle(vehicle) {\n    this.navCtrl.push('VehiclesEditorPage', { vehicle: vehicle });\n  }\n\n  delete(vehicle) {\n    this.api.delete('vehicles/' + vehicle.id)\n      .then((data) => {\n        this.getData();\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n\n  actions(vehicle) {\n    this.actionsheet.create({\n      title: this.api.trans('literals.actions') + \" | \" + vehicle.name,\n      buttons: [\n        {\n          text: this.api.trans('crud.edit'),\n          icon: 'create',\n          cssClass: 'icon-secondary',\n          handler: () => { this.updateVehicle(vehicle) }\n        },\n        {\n          text: this.api.trans('crud.edit') + \" \" + this.api.trans('literals.image'),\n          icon: 'photo',\n          cssClass: 'icon-purple',\n          handler: () => { this.askFile(vehicle) }\n        },\n        {\n          text: this.api.trans('crud.delete'),\n          icon: 'trash',\n          role: 'destructive',\n          cssClass: 'icon-danger',\n          handler: () => { this.delete(vehicle) }\n        }\n\n      ]\n    }).present();\n  }\n\n\n  askFile(vehicle) {\n    this.vehicle_image = vehicle;\n    var filer: any = document.querySelector(\"#input-file-vehicle\")\n    filer.click();\n  }\n\n  readFile(event) {\n    try {\n      var reader: any = new FileReader();\n      reader.readAsDataURL(event.target.files[0])\n      reader.onload = (result) => {\n        this.vehicle_image.image_url = result.target.result;\n        this.uploadImage(this.vehicle_image.id)\n      };\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  uploadImage(id) {\n    return this.api.post('images/upload/vehicle/' + id, { image: this.vehicle_image.image_url })\n      .then((data: any) => {\n        console.log(data);\n        this.vehicle_image.image = data.image;\n        this.toast.create({\n          message: this.api.trans(\"literals.image\") + \" \" + this.api.trans(\"crud.updated\"),\n          duration: 1500,\n          showCloseButton: true,\n        }).present();\n      })\n      .catch(console.error)\n  }\n\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vehicles/vehicles.ts"],"sourceRoot":""}