{"version":3,"sources":["../../src/pages/add-post/add-post.module.ts","../../src/pages/add-post/add-post.ts"],"names":[],"mappings":"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","file":"25.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddPostPage } from './add-post';\n@NgModule({\n  declarations: [AddPostPage],\n  imports: [\n    IonicPageModule.forChild(AddPostPage)\n  ],\n})\nexport class AddPostPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-post/add-post.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\nimport { Api } from \"../../providers/api\";\n\nimport {IonicPage} from \"ionic-angular\";\n\n@IonicPage()\n@Component({\n  selector: 'page-add-post',\n  templateUrl: 'add-post.html',\n})\nexport class AddPostPage {\n  @ViewChild('searchbar') searchbar;\n  post = { title: \"\", text: \"\", tags: [], user_id: this.api.user.id };\n  provider;\n  tags = [];\n  selected_tags = [];\n  post_image = null\n  uploading = false;\n  constructor(public navCtrl: NavController, public navParams: NavParams, public api: Api) {\n  }\n\n  ionViewDidLoad() {\n    this.api.get('tags').then((tags: any) => {\n      console.log(tags);\n      this.tags = tags;\n    })\n      .catch((err) => {\n        console.error(err);\n      });\n    this.provider = {\n      labelAttribute: \"name\",\n      getResults: (q) => {\n        return this.tags.filter(tag => {\n          if (this.selected_tags.indexOf(tag) > -1)\n            return false;\n          return tag.name.toLowerCase().indexOf(q.toLowerCase()) > -1;\n        });\n      }\n    }\n  }\n\n\n  createPost() {\n    this.uploading = true\n    this.selected_tags.forEach((tag) => {\n      this.post.tags.push(tag.name);\n    });\n    this.api.post('posts', this.post)\n      .then((data: any) => {\n        if (this.post_image) {\n          this.uploadImage(data.id)\n            .then((resp) => {\n              this.uploading = false;\n              console.log(data);\n              this.close();\n            })\n            .catch((err) => {\n              console.error(err);\n            })\n        }\n        else {\n          this.uploading = false;\n          console.log(data);\n          this.close();\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n      })\n  }\n  uploadImage(id) {\n    return this.api.post('images/upload/post/' + id, { image: this.post_image })\n  }\n\n  addTag(ev) {\n    this.selected_tags.push(ev);\n    this.searchbar.keyword = \"\";\n  }\n  deleteTag(tag, index) {\n    this.selected_tags.splice(index, 1);\n  }\n  close() {\n    this.navCtrl.pop();\n  }\n  askFile() {\n    var filer: any = document.querySelector(\"#input-file\")\n    filer.click();\n  }\n  readFile(event) {\n    try {\n      var reader: any = new FileReader();\n      reader.readAsDataURL(event.target.files[0])\n      reader.onload = (result) => {\n        this.post_image = result.target.result;\n      };\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-post/add-post.ts"],"sourceRoot":""}