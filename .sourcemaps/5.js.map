{"version":3,"sources":["../../src/pages/visit/visit.module.ts","../../src/pages/visit/visit.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACZ;AAOpC,IAAa,eAAe;IAA5B;IAA+B,CAAC;IAAD,sBAAC;AAAD,CAAC;AAAnB,eAAe;IAN3B,+DAAQ,CAAC;QACR,YAAY,EAAE,CAAC,yDAAS,CAAC;QACzB,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;SACpC;KACF,CAAC;GACW,eAAe,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;;ACTc;AACe;AACf;AAQ1C,IAAa,SAAS;IAEpB,mBAAmB,OAAsB,EAAS,SAAoB,EAAS,GAAQ;QAApE,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,QAAG,GAAH,GAAG,CAAK;QADvF,UAAK,GAAQ,EAAE,CAAC;QAEd,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC;IACpC,CAAC;IAED,kCAAc,GAAd;QAAA,iBAKC;QAJC,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;QACxC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,YAAU,IAAI,CAAC,KAAK,CAAC,EAAE,kEAA+D,CAAC;aACjG,IAAI,CAAC,cAAI,IAAM,KAAI,CAAC,KAAK,GAAG,IAAI,EAAC,CAAC,CAAC;aACnC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;IACzB,CAAC;IAED,mCAAe,GAAf,UAAgB,QAAQ;QACtB,IAAI,GAAG,GAAG,EAAE;QACZ,QAAQ,CAAC,OAAO,CAAC,gBAAM;YACrB,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE;QAClD,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED,+BAAW,GAAX,UAAY,KAAa;QAAzB,iBAYC;QAZW,qCAAa;QACvB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;QACvB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE;YACtC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM;YACzB,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;SACpD,CAAC;aACC,IAAI,CAAC,UAAC,IAAI;YACT,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;YACjB,EAAE,CAAC,CAAC,KAAK,CAAC;gBACR,KAAI,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,CAAC;aACD,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;IACzB,CAAC;IAED,2BAAO,GAAP;QACE,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACrB,CAAC;IACH,gBAAC;AAAD,CAAC;AAtCY,SAAS;IAJrB,gEAAS,CAAC;QACT,QAAQ,EAAE,YAAY;OACG;KAC1B,CAAC;cAGuF;AAoCxF;SAtCY,SAAS,e","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { VisitPage } from './visit';\n@NgModule({\n  declarations: [VisitPage],\n  imports: [\n    IonicPageModule.forChild(VisitPage)\n  ],\n})\nexport class VisitPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/visit/visit.module.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\nimport { Api } from \"../../providers/api\";\nimport {IonicPage} from \"ionic-angular\";\n\n@IonicPage()\n@Component({\n  selector: 'page-visit',\n  templateUrl: 'visit.html',\n})\nexport class VisitPage {\n  visit: any = {};\n  constructor(public navCtrl: NavController, public navParams: NavParams, public api: Api) {\n    this.visit = navParams.data.visit;\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad VisitPage');\n    this.api.get(`visits/${this.visit.id}?with[]=visitor&with[]=visitors&with[]=parking&with[]=vehicle`)\n      .then(data => { this.visit = data })\n      .catch(console.error)\n  }\n\n  prepareVisitors(visitors) {\n    var obj = {}\n    visitors.forEach(person => {\n      obj[person.id] = { status: person.pivot.status }\n    });\n    return obj;\n  }\n\n  updateVisit(close = false) {\n    console.log(this.visit)\n    this.api.put('visits/' + this.visit.id, {\n      status: this.visit.status,\n      visitors: this.prepareVisitors(this.visit.visitors)\n    })\n      .then((data) => {\n        console.log(data)\n        if (close)\n          this.dismiss();\n      })\n      .catch(console.error)\n  }\n\n  dismiss() {\n    this.navCtrl.pop();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/visit/visit.ts"],"sourceRoot":""}