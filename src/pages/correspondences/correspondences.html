<ion-header>
  <ion-navbar color="primary">
    <button ion-button icon-only menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{'literals.correspondences' | trans }}</ion-title>
  </ion-navbar>
</ion-header>

<!-- TODO Improve like residencias Admin -->
<ion-content class="container">
  <div text-center *ngIf="loading">
    <ion-spinner></ion-spinner>
  </div>
  <ion-refresher (ionRefresh)="getCorrespondences($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-list>
    <button ion-item *ngFor="let corres of correspondences" (click)="actions(corres)">
      <h2>{{corres.item}}
        <span *ngIf="corres.quantity>1">({{corres.quantity}})</span>
      </h2>
      <h4>
        {{ ('literals.' + corres.status) | trans }}
      </h4>
      <p *ngIf="corres.user">
        {{corres.user.name}}
      </p>
      <p *ngIf="corres.receptor">
        {{corres.receptor.name}}
      </p>
      <small>

        {{ corres.created_at | amCalendar }}
      </small>
      <ion-icon small item-right [name]="corres.status === 'arrival' ? 'mail' : corres.status === 'delivered'?'mail-open':'archive'"
        [color]="corres.status === 'arrival' ? 'primary' : corres.status === 'delivered' ? 'secondary':'warning'"></ion-icon>
    </button>
  </ion-list>
</ion-content>
